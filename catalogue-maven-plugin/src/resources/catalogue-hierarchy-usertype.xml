<?xml version="1.0"?>
<tl xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="C:\Documents and Settings\Rupert\projects\javasource\src\resources\tl.xsd"
    xmlns:cat="http://thesett.com/catalogue-def-0.2"
    xmlns:gen="http://thesett.com/source-code-generator-0.1">

<var name="package" value="cat:CatalogueDefinition/cat:Package/@name"/>

<for path="cat:CatalogueDefinition/cat:HierarchyDef">
<compilationUnit package="$package" fileName="gen:toCamelCaseUpper(concat(string(@name), 'UserType.java'))">
package <value path="$package"/>;

import com.thesett.catalogue.customtypes.HierarchyAttributeCompositeUserType;
import com.thesett.aima.attribute.impl.HierarchyAttribute;

/**
 * Generated user hierarchy type from catalogue model.
 */
public class <value path="gen:toCamelCaseUpper(string(@name))"/>UserType extends HierarchyAttributeCompositeUserType
{
    public String[] getPropertyNames()
    {
        // Ensure that the hierarchy attribute type has been set up with its level names.
        HierarchyAttribute.getFactoryForClass(getTypeName()).setLevelNames(new String[] { <for path=".//cat:Level">"<value path="@name"/>"<if path="gen:notLastInFor()">, </if></for> });

        return super.getPropertyNames();
 
    }

    public String getTypeName()
    {
        return "<value path="@name"/>";
    }
}

</compilationUnit>
</for>
</tl>