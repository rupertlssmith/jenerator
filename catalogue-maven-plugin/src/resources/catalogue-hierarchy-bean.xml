<?xml version="1.0"?>
<tl xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="C:\Documents and Settings\Rupert\projects\javasource\src\resources\tl.xsd"
    xmlns:cat="http://thesett.com/catalogue-def-0.2"
    xmlns:gen="http://thesett.com/source-code-generator-0.1">

<var name="package" value="cat:CatalogueDefinition/cat:Package/@name"/>

<for path="cat:CatalogueDefinition/cat:HierarchyDef">
<compilationUnit package="$package" fileName="gen:toCamelCaseUpper(concat(string(@name), '.java'))">
package <value path="$package"/>;

import java.io.Serializable;

import org.apache.log4j.Logger;

import com.thesett.aima.attribute.impl.HierarchyAttribute;
import com.thesett.aima.state.impl.ExtendableBeanState;

/**
 * Generated hierarchy bean from catalogue model.
 */
public class <value path="gen:toCamelCaseUpper(string(@name))"/> extends ExtendableBeanState implements Serializable
{
    /** Used for logging. */
    private static final Logger log = Logger.getLogger(<value path="gen:toCamelCaseUpper(string(@name))"/>.class);

    private HierarchyAttribute <value path="gen:toCamelCase(string(@name))"/>;

    /** No-arg constructor for serialization. */
    public <value path="gen:toCamelCaseUpper(string(@name))"/>() {}

    public <value path="gen:toCamelCaseUpper(string(@name))"/>(HierarchyAttribute h) { this.<value path="gen:toCamelCase(string(@name))"/> = h; }

    public <value path="gen:toCamelCaseUpper(string(@name))"/>(<for path=".//cat:Level">String <value path="@name"/><if path="gen:notLastInFor()">, </if></for>)
    {
        HierarchyAttribute.HierarchyAttributeFactory factory = HierarchyAttribute.getFactoryForClass("<value path="@name"/>");

        <value path="gen:toCamelCase(string(@name))"/> = factory.createHierarchyAttribute(new String[] { <for path=".//cat:Level"><value path="@name"/><if path="gen:notLastInFor()">, </if></for> });
    }

    private Long getId()
    {
        if (<value path="gen:toCamelCase(string(@name))"/> != null)
        {
            return <value path="gen:toCamelCase(string(@name))"/>.getId();
        }
        else
        {
            return null;
        }
    }

    private void setId(Long id)
    {
        if (<value path="gen:toCamelCase(string(@name))"/> != null)
        {
            <value path="gen:toCamelCase(string(@name))"/>.setId(id);
        }
    }

    public HierarchyAttribute get<value path="gen:toCamelCaseUpper(string(@name))"/>()
    {
        return <value path="gen:toCamelCase(string(@name))"/>;
    }

    public void set<value path="gen:toCamelCaseUpper(string(@name))"/>(HierarchyAttribute h)
    {
        <value path="gen:toCamelCase(string(@name))"/> = h;
    }

    public boolean equals(Object o)
    {
        log.debug("public boolean equals(Object o): called");

        if (o instanceof <value path="gen:toCamelCaseUpper(string(@name))"/>)
        {
            <value path="gen:toCamelCaseUpper(string(@name))"/> comp = (<value path="gen:toCamelCaseUpper(string(@name))"/>)o;

            //log.debug("this = " + this.toString());
            //log.debug("comp = " + comp.toString());
            //log.debug("this.<value path="gen:toCamelCase(string(@name))"/> = " + this.get<value path="gen:toCamelCaseUpper(string(@name))"/>());
            //log.debug("comp.<value path="gen:toCamelCase(string(@name))"/> = " + comp.get<value path="gen:toCamelCaseUpper(string(@name))"/>());

            boolean result = this.get<value path="gen:toCamelCaseUpper(string(@name))"/>().equals(comp.get<value path="gen:toCamelCaseUpper(string(@name))"/>());

            //log.debug("result = " + result);

            return result;
        }
        else
        {
            return false;
        }
    }

    public int hashCode()
    {
        return this.<value path="gen:toCamelCase(string(@name))"/>.hashCode();
    }

    public String toString()
    {
        return <value path="gen:toCamelCase(string(@name))"/>.toString();
    }
}

</compilationUnit>
</for>
</tl>
